<template>

    <template if:true={isLoading}>
        <lightning-spinner alternative-text="Loading" size="large"></lightning-spinner>
    </template>
    
    <lightning-card title={cardTitle}>
        <lightning-button-icon slot="actions" icon-name="utility:refresh" onclick={handleRefresh} class="slds-var-p-around_small"></lightning-button-icon>
        <template if:true={showNew}>
            <lightning-button slot="actions" label = "New" onclick={handleNew} class="slds-var-p-around_small"></lightning-button>
        </template>
        <lightning-tree-grid
                columns={gridColumns}
                data={gridData} hide-checkbox-column="true" onrowaction={handleRowAction}
                key-field="recordName" min-column-width="230" max-column-width="270"
            ></lightning-tree-grid>
    </lightning-card>

    <template if:true={showModal}>
        <div class="slds-modal slds-fade-in-open slds-backdrop">
            <lightning-record-edit-form object-api-name="Placement__c" record-id="" onsubmit={handleSubmit} onsuccess={handleSuccess}>
            <div class="slds-modal__container">
                <div class="slds-modal__header"> 
                    <lightning-button-icon icon-name="utility:close"
                                        onclick={hideModal}
                                        alternative-text="close"
                                        variant="bare-inverse"
                                        class="slds-modal__close"></lightning-button-icon> 
                    <h2>New Placement</h2>  
                </div>
                <div class="slds-modal__content slds-p-around_medium">
                        <lightning-layout>
                            <lightning-layout-item size="6" padding="around-small">
                                    <lightning-combobox label="Child" options={childOptions} value={childId}  placeholder="Select Child" onchange={handleChange}></lightning-combobox>
                            </lightning-layout-item>
                            <lightning-layout-item size="6" padding="around-small">
                                <lightning-input-field field-name="Begin_Date__c"></lightning-input-field>
                            </lightning-layout-item>
                        </lightning-layout>
                </div>
                <div class="slds-modal__footer">
                    <lightning-button icon-name="utility:close" label="Cancel" variant="destructive"  class="slds-p-right_small" onclick={hideModal}></lightning-button> 
                    <lightning-button icon-name="utility:save" label="Save" type="submit" variant="brand"></lightning-button>  
                </div>
            </div>
            </lightning-record-edit-form>
        </div>
    </template>
    
</template>